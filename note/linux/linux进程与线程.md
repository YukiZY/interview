
####1.C++进程内存空间分布：
[linux虚拟地址空间分配](http://www.cnblogs.com/clover-toeic/p/3754433.html)
>
  * __linux系统中一个进程占用的最大空间为2的32次方=4G，即一个进程有4G的虚拟内存空间,其中1G为内核空间，3G为用户空间__
  * __用户空间中从高到低依次是 《栈stack->内存映射区memory mapping->堆heap->未初始化数据区BSS->数据区data->代码区code》__
  * __内存映射区memory mapping：共享内存就在内存映射区，动态链接库也会被映射到这里__
  * __栈空间：栈地址从高到低分配，栈顶地址和栈大小固定2M，常量区也在栈空间上，存储局部,临时变量,在程序块开始时自动分配内存,结束时自动释放内存.存储函数的返回指针. 当函数被调用时，它们被压入栈；当函数返回时，它们就要被弹出堆栈。__
  * __堆空间：链表形式，有效的虚拟内存空间，最大3G，分配的堆内存是经过字节对齐的空间，以适合原子操作。堆管理器通过链表管理每个申请的内存，由于堆申请和释放是无序的，最终会产生内存碎片。堆内存一般由应用程序分配释放，回收的内存可供重新使用。若程序员不释放，程序结束时操作系统可能会自动回收__
  * __BSS段：可执行程序分为BSS段，数据段，代码段(文本段)；__
  __在C++中BSS(Block Started by Symbol)是指用来存放未初始化,静态变量和全局变量的内存段，是可读写的内存，特点是在程序运行之前BSS会自动清0，这就是为什么c++中未初始化的静态变量和全局变量会默认为0的原因__
  * __初始化的静态变量和全局变量、成员变量、临时变量都是存放在数据段中__
  * __程序段（text）:  程序段为程序代码在内存中的映射.一个程序可以在内存中多有个副本.__
  * __文字常量区: 常量字符串就是放在这里的。__
  * __3和4称为静态存储区，6和7称为动态存储区__    __size a.out可以查看可执行文件的段大小__
    
          //main.cpp 
          int a = 0; 全局初始化区--data区 
          char *p1; 全局未初始化区--BSS区
          main() 
          { 
          int b; 栈--statck
          char s[] = "abc"; 栈--stack "abc"--数据段data
          char *p2; 栈--stack 
          char *p3 = "123456"; 123456\0在常量区，p3在栈上-stack。 
          static int c =0； 全局（静态）初始化区--data区
          p1 = (char *)malloc(10);--堆heap 
          p2 = (char *)malloc(20);--堆heap
          分配得来得10和20字节的区域就在堆区。 
          strcpy(p1, "123456"); 123456\0放在常量区，编译器可能会将它与p3所指向的"123456"优化成一个地方。 
          }
          
####2.多进程和多线程的差异比较：
>

          维度               |       多进程                                        |         多线程                   
         数据共享同步        | 进程间数据是独享的，共享复杂，需要IPC，同步简单     | 多线程共享进程数据，共享简单，同步复杂
         内存/CPU            | 进程占用内存大，切换复杂，CPU利用率低               | 线程内存占用少，切换简单，CPU利用率高
         创建、销毁、切换    | 创建、切换、销毁复杂，速度慢                        | 比较简单，速度快
         编程、调试          | 简单                                                | 复杂
         可靠性              | 进程间不会相互影响                                  | 一个线程挂掉导致整个进程的所有线程都挂掉
         分布式              | 适合多核、多机分布                                  | 适用于多核分布
 
__线程私有的东西：线程ID，一组寄存器，栈，调度优先级和策略，线程私有数据__     
[线程私有数据](http://blog.chinaunix.net/uid-8917757-id-2450452.html)   __一个线程真正拥有的唯一私有存储是处理器寄存器__


####3.线程和进程：
>
  * 进程——资源分配的最小单位，线程——程序执行的最小单位
   * 一般运行一个程序就是一个进程
   * 进程可以创建一个线程，也可以创建一个进程
   * 线程是由进程管理，线程之间、线程与父进程之后可以共享内存变量
   *  进程之间一般不可以直接共享内存变量，需要使用一些进程间的控制共享内存变量
   * 进程是个容器或者说资源管理者，有独立的内存地址空间。
   * 线程依赖于它所在的进程，共享进程的资源和内存地址空间
  * 应用场景：
   * 需要频繁创建销毁的优先使用线程
   * 需要进行大量计算的有限使用线程，大量计算就意味着需要频繁切换cpu和对cpu的大量消耗
   * 强相关的处理用线程，弱相关的处理用进程
   * 涉及到多机分布的用进程，涉及到多核分布的用线程
   * 一个进程的开销大约是一个线程开销的30倍左右  
  * [进程、线程、多线程](http://www.cnblogs.com/obama/archive/2013/04/12/3016509.html)
